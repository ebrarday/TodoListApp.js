{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/lionKing/Desktop/todo-list-app-main/todo-list-app-main/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _createForOfIteratorHelper from\"C:/Users/lionKing/Desktop/todo-list-app-main/todo-list-app-main/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _asyncToGenerator from\"C:/Users/lionKing/Desktop/todo-list-app-main/todo-list-app-main/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{deleteDoc,doc}from\"firebase/firestore\";import{useContext}from\"react\";import{AuthContext}from\"../../contexts/AuthContext\";import{TodoContext}from\"../../contexts/TodoContext\";import{database}from\"../../firebaseConfig\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var DeleteTasks=function DeleteTasks(){var _useContext=useContext(TodoContext),todos=_useContext.todos;var _useContext2=useContext(AuthContext),loggedUser=_useContext2.loggedUser;var allTasks=todos.filter(function(todo){return todo.uid===(loggedUser===null||loggedUser===void 0?void 0:loggedUser.uid);});var allIds=allTasks.map(function(todo){return todo.id;});var doneTasks=todos.filter(function(todo){return todo.uid===(loggedUser===null||loggedUser===void 0?void 0:loggedUser.uid)&&todo.checked===true;});var doneIds=doneTasks.map(function(todo){return todo.id;});var deleteDoneTasks=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _iterator,_step,id;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_iterator=_createForOfIteratorHelper(doneIds);_context.prev=2;_iterator.s();case 4:if((_step=_iterator.n()).done){_context.next=10;break;}id=_step.value;_context.next=8;return deleteDoc(doc(database,'todos',id));case 8:_context.next=4;break;case 10:_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](2);_iterator.e(_context.t0);case 15:_context.prev=15;_iterator.f();return _context.finish(15);case 18:_context.next=23;break;case 20:_context.prev=20;_context.t1=_context[\"catch\"](0);alert(_context.t1.message);case 23:case\"end\":return _context.stop();}}},_callee,null,[[0,20],[2,12,15,18]]);}));return function deleteDoneTasks(){return _ref.apply(this,arguments);};}();var deleteAllTasks=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var _iterator2,_step2,id;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_iterator2=_createForOfIteratorHelper(allIds);_context2.prev=2;_iterator2.s();case 4:if((_step2=_iterator2.n()).done){_context2.next=10;break;}id=_step2.value;_context2.next=8;return deleteDoc(doc(database,'todos',id));case 8:_context2.next=4;break;case 10:_context2.next=15;break;case 12:_context2.prev=12;_context2.t0=_context2[\"catch\"](2);_iterator2.e(_context2.t0);case 15:_context2.prev=15;_iterator2.f();return _context2.finish(15);case 18:_context2.next=23;break;case 20:_context2.prev=20;_context2.t1=_context2[\"catch\"](0);alert(_context2.t1.message);case 23:case\"end\":return _context2.stop();}}},_callee2,null,[[0,20],[2,12,15,18]]);}));return function deleteAllTasks(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"section\",{className:\"delete__tasks\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:deleteDoneTasks,children:\"Delete done tasks\"}),/*#__PURE__*/_jsx(\"button\",{onClick:deleteAllTasks,children:\"Delete all tasks\"})]});};","map":{"version":3,"names":["deleteDoc","doc","useContext","AuthContext","TodoContext","database","DeleteTasks","todos","loggedUser","allTasks","filter","todo","uid","allIds","map","id","doneTasks","checked","doneIds","deleteDoneTasks","alert","message","deleteAllTasks"],"sources":["C:/Users/lionKing/Desktop/todo-list-app-main/todo-list-app-main/src/components/todos/DeleteTasks.js"],"sourcesContent":["import { deleteDoc, doc } from \"firebase/firestore\";\nimport { useContext } from \"react\";\nimport { AuthContext } from \"../../contexts/AuthContext\";\nimport { TodoContext } from \"../../contexts/TodoContext\";\nimport { database } from \"../../firebaseConfig\";\n\nexport const DeleteTasks = () => {\n    const { todos } = useContext(TodoContext);\n    const { loggedUser } = useContext(AuthContext);\n\n    const allTasks = todos.filter(todo => todo.uid === loggedUser?.uid);\n    const allIds = allTasks.map((todo) => {\n        return todo.id\n    });\n\n    const doneTasks = todos.filter(todo => todo.uid === loggedUser?.uid && todo.checked === true);\n    const doneIds = doneTasks.map((todo) => {\n        return todo.id\n    });\n\n    const deleteDoneTasks = async () => {\n        try {\n            for (let id of doneIds) {\n                await deleteDoc(doc(database, 'todos', id));\n            }\n        } catch (error) {\n            alert(error.message)\n        }\n\n    }\n\n    const deleteAllTasks = async () => {\n        try {\n            for (let id of allIds) {\n                await deleteDoc(doc(database, 'todos', id));\n            }\n        } catch (error) {\n            alert(error.message);\n        }\n        \n    }\n\n    return (\n        <section className=\"delete__tasks\">\n            <button onClick={deleteDoneTasks}>Delete done tasks</button>\n            <button onClick={deleteAllTasks}>Delete all tasks</button>\n        </section>\n    );\n}"],"mappings":"ueAAA,OAASA,SAAS,CAAEC,GAAG,KAAQ,oBAAoB,CACnD,OAASC,UAAU,KAAQ,OAAO,CAClC,OAASC,WAAW,KAAQ,4BAA4B,CACxD,OAASC,WAAW,KAAQ,4BAA4B,CACxD,OAASC,QAAQ,KAAQ,sBAAsB,CAAC,wFAEhD,MAAO,IAAMC,YAAW,CAAG,QAAdA,YAAW,EAAS,CAC7B,gBAAkBJ,UAAU,CAACE,WAAW,CAAC,CAAjCG,KAAK,aAALA,KAAK,CACb,iBAAuBL,UAAU,CAACC,WAAW,CAAC,CAAtCK,UAAU,cAAVA,UAAU,CAElB,GAAMC,SAAQ,CAAGF,KAAK,CAACG,MAAM,CAAC,SAAAC,IAAI,QAAIA,KAAI,CAACC,GAAG,IAAKJ,UAAU,SAAVA,UAAU,iBAAVA,UAAU,CAAEI,GAAG,IAAC,CACnE,GAAMC,OAAM,CAAGJ,QAAQ,CAACK,GAAG,CAAC,SAACH,IAAI,CAAK,CAClC,MAAOA,KAAI,CAACI,EAAE,CAClB,CAAC,CAAC,CAEF,GAAMC,UAAS,CAAGT,KAAK,CAACG,MAAM,CAAC,SAAAC,IAAI,QAAIA,KAAI,CAACC,GAAG,IAAKJ,UAAU,SAAVA,UAAU,iBAAVA,UAAU,CAAEI,GAAG,GAAID,IAAI,CAACM,OAAO,GAAK,IAAI,GAAC,CAC7F,GAAMC,QAAO,CAAGF,SAAS,CAACF,GAAG,CAAC,SAACH,IAAI,CAAK,CACpC,MAAOA,KAAI,CAACI,EAAE,CAClB,CAAC,CAAC,CAEF,GAAMI,gBAAe,4FAAG,iNAEDD,OAAO,8FAAbH,EAAE,mCACDf,UAAS,CAACC,GAAG,CAACI,QAAQ,CAAE,OAAO,CAAEU,EAAE,CAAC,CAAC,2SAG/CK,KAAK,CAAC,YAAMC,OAAO,CAAC,mFAG3B,kBATKF,gBAAe,0CASpB,CAED,GAAMG,eAAc,6FAAG,0NAEAT,MAAM,mGAAZE,EAAE,qCACDf,UAAS,CAACC,GAAG,CAACI,QAAQ,CAAE,OAAO,CAAEU,EAAE,CAAC,CAAC,yTAG/CK,KAAK,CAAC,aAAMC,OAAO,CAAC,CAAC,oFAG5B,kBATKC,eAAc,2CASnB,CAED,mBACI,iBAAS,SAAS,CAAC,eAAe,wBAC9B,eAAQ,OAAO,CAAEH,eAAgB,+BAA2B,cAC5D,eAAQ,OAAO,CAAEG,cAAe,8BAA0B,GACpD,CAElB,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}